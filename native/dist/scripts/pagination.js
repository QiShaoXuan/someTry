"use strict";var _createClass=function(){function e(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var pagination=function(){function n(t){if(_classCallCheck(this,n),this.container=document.querySelector(t.container),!this.container)return console.error("options need container");this.init({container:"",current:1,pageSize:10,total:0,onChange:null,preText:"上一页",nextText:"下一页",hideOnSinglePage:!0,pageCount:5},t),this.setBullets(),this.setEvent()}return _createClass(n,[{key:"init",value:function(t,n){if(this.options=Object.assign(t,n),this.options.pageSum=Math.ceil(this.options.total/this.options.pageSize),this.options.pageCount<5||21<this.options.pageCount)return console.error("pageCount error");this.options.pageCount=this.options.pageCount%2==1?this.options.pageCount:this.options.pageCount+1}},{key:"setBullets",value:function(){var t=this.setBulletsArr(this.options.total,this.options.current,this.options.pageCount),n=0==t.length?"":this.options.hideOnSinglePage&&1==t.length?"":this.setBulletsDom(t);this.container.innerHTML=n}},{key:"setBulletsDom",value:function(t){var n=this,i="";return i+='<li class="pagination-button pagination-pre'+(1==this.options.current?" disable":"")+'">'+this.options.preText+"</li>",t.forEach(function(t){i+='<li class="pagination-item '+(isNaN(t)?"":"page-num")+" "+(t===n.options.current?"active":"")+'" '+(isNaN(t)?"":'data-page="'+t+'"')+">"+t+"</li>"}),'<ul class="pagination">'+(i+='<li class="pagination-button pagination-next'+(this.options.current==this.options.pageSum?" disable":"")+'">'+this.options.nextText+"</li>")+"</ul>"}},{key:"setBulletsArr",value:function(t,n,i){var e=[],s=this.options.pageSum;if(s<=i+1)for(var o=1;o<=s;o++)e.push(o);else if(n<i){for(o=1;o<=i;o++)e.push(o);e.push("..."),e.push(s)}else if(s<n+i){e.push(1),e.push("...");for(o=s-i;o<=s;o++)e.push(o)}else{var a=i%2==1?(i-1)/2:i/2;e.push(1),e.push("...");for(o=n-a;o<=n+a;o++)e.push(o);e.push("..."),e.push(s)}return e}},{key:"setEvent",value:function(){var e=this;this.container.addEventListener("click",function(t){var n=t.target;if(n.classList.contains("page-num")){var i=Number(n.dataset.page);if(i==e.options.current)return;e.options.current=i,e.setBullets(),e.options.callback&&e.options.callback(e.options.current)}if(n.classList.contains("pagination-pre")){if(1==e.options.current)return;e.options.current=e.options.current-1,e.setBullets(),e.options.callback&&e.options.callback(e.options.current)}if(n.classList.contains("pagination-next")){if(e.options.current==e.options.pageSum)return;e.options.current=e.options.current+1,e.setBullets(),e.options.callback&&e.options.callback(e.options.current)}})}},{key:"update",value:function(t){this.init(this.options,t),this.setBullets()}}]),n}();