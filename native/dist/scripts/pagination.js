"use strict";var _createClass=function(){function o(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,n,e){return n&&o(t.prototype,n),e&&o(t,e),t}}();function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var pagination=function(){function n(t){if(_classCallCheck(this,n),this.container=document.querySelector(t.container),!this.container)return console.error("options need container");if(this.options=Object.assign({container:"",current:1,pageSize:10,total:0,onChange:null,preText:"",nextText:"",hideOnSinglePage:!1,pageCount:5},t),console.log(this),this.options.pageCount<5||21<this.options.pageCount)return console.error("pageCount error");this.options.pageCount=this.options.pageCount%2==1?this.options.pageCount:this.options.pageCount+1,this.setBullets(),this.setEvent(this)}return _createClass(n,[{key:"setBullets",value:function(){var t=this.setBulletsArr(this.options.total,this.options.current,this.options.pageCount),n=this.setBulletsDom(t);this.container.innerHTML=n}},{key:"setBulletsDom",value:function(t){var e=this,o="";return o+='<li class="pagination-button pagination-pre">上一页</li>',t.forEach(function(t){var n=Number(t);o+='<li class="pagination-item '+(NaN===n?"":"page-num")+" "+(t===e.options.current?"active":"")+'" '+(NaN===n?"":'data-page="'+t+'"')+">"+t+"</li>"}),'<ul class="pagination">'+(o+=' <li class="pagination-button pagination-next">下一页</li>')+"</ul>"}},{key:"setBulletsArr",value:function(t,n,e){var o=[];if(t<=e+1)for(var i=1;i<=t;i++)o.push(i);else if(n<e){for(i=1;i<=e;i++)o.push(i);o.push("..."),o.push(t)}else if(t<n+e){o.push(1),o.push("...");for(i=t-e;i<=t;i++)o.push(i)}else{var s=e%2==1?(e-1)/2:e/2;o.push(1),o.push("...");for(i=n-s;i<=n+s;i++)o.push(i);o.push("..."),o.push(t)}return o}},{key:"setEvent",value:function(){var o=this;this.container.unbind("click"),this.container.addEventListener("click",function(t){var n=t.target;if(n.classList.contains("page-num")){var e=n.dataset.page;if(e==o.options.current)return;o.options.current=e,o.setBullets(),o.options.callback&&o.callback(o.options.current)}if(n.classList.contains("pagination-pre")){if(1==o.options.current)return;o.options.current=o.options.current-1,o.setBullets(),o.options.callback&&o.callback(o.options.current)}if(n.classList.contains("pagination-next")){if(o.options.current==o.options.pageCount)return;o.options.current=o.options.current+1,o.setBullets(),o.callback&&o.callback(o.sum,o.now,o.show)}}),this.container.on("click",".page-num",function(){var t=$(this).data("page");t!=o.now&&(o.now=t,o.setBullets(),o.callback&&o.callback(o.sum,o.now,o.show))}),this.container.on("click",".pagination-pre",function(){1!=o.now&&(o.now=o.now-1,o.setBullets(),o.callback&&o.callback(o.sum,o.now,o.show))}),this.container.on("click",".pagination-next",function(){console.log(o.now,o.sum),o.now!=o.sum&&(o.now=o.now+1,o.setBullets(),o.callback&&o.callback(o.sum,o.now,o.show))})}}]),n}();